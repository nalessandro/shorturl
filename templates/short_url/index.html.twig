{% extends 'base.html.twig' %}

{% block title %}Hello ShortUrlController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="container-fluid">
    <h1>Hello {{ controller_name }}! âœ…</h1>

    <div class="input-group input-group-lg">
        <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroup-sizing-lg">URL</span>
        </div>
        <input type="text" id="url" class="form-control" aria-label="Large" aria-describedby="inputGroup-sizing-sm">
        <div class="input-group-append">
            <button id="submit" class="btn btn-primary" type="button">Shorten</button>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $('#submit').on('click', function() {
            var url = $('#url').val();
            if (url != undefined) {
                $.ajax({
                    method: 'GET',
                    url: '/shorten?url='+url,
                    success: function(result) {
                        $('#url').val('https://nath.an/'+result);
                    }
                });
            }
        })
    </script>
{% endblock %}
